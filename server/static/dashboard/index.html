<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Ideation Engine v6.0 â€” ëŒ€ì‹œë³´ë“œ</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
</head>
<body>
  <div id="app">
    <header>
      <h1>API Ideation Engine v6.0</h1>
      <div class="health" v-if="health">
        <span :class="'status-' + health.status">{{ health.status }}</span>
        <span v-if="health.last_run_at">ìµœê·¼ ì‹¤í–‰: {{ formatTime(health.last_run_at) }}</span>
      </div>
    </header>

    <nav class="filters">
      <select v-model="gradeFilter">
        <option value="">ì „ì²´ ë“±ê¸‰</option>
        <option v-for="g in ['S','A','B','C','D']" :key="g" :value="g">{{ g }}ê¸‰</option>
      </select>
      <input type="date" v-model="dateFilter" placeholder="ë‚ ì§œ í•„í„°">
      <input type="text" v-model="searchQuery" placeholder="í‚¤ì›Œë“œ ê²€ìƒ‰...">
    </nav>

    <section class="stats" v-if="batches.length">
      <div class="stat-card" v-for="(count, grade) in gradeDist" :key="grade">
        <span class="grade-badge" :class="'grade-' + grade">{{ grade }}</span>
        <span class="count">{{ count }}</span>
      </div>
    </section>

    <section class="idea-list">
      <div v-if="loading" class="loading">ë¡œë”© ì¤‘...</div>
      <div v-else-if="filteredIdeas.length === 0" class="empty">ì•„ì´ë””ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
      <article v-for="idea in filteredIdeas" :key="idea.id || idea.hypothesis_id" class="idea-card">
        <div class="idea-header">
          <span class="grade-badge" :class="'grade-' + idea.grade">{{ idea.grade }}</span>
          <h3>{{ idea.service_name }}</h3>
          <span class="score">{{ idea.numrv_score?.toFixed(2) || idea.weighted_score?.toFixed(2) }}</span>
        </div>

        <div class="idea-sections">
          <details>
            <summary>ê°œìš”</summary>
            <p><strong>ë¬¸ì œ:</strong> {{ idea.problem }}</p>
            <p><strong>ì†”ë£¨ì…˜:</strong> {{ idea.concept || idea.solution }}</p>
            <p><strong>íƒ€ê¹ƒ:</strong> {{ idea.target || idea.target_buyer }}</p>
          </details>

          <details>
            <summary>ìˆ˜ìµ ë¶„ì„</summary>
            <p><strong>ìˆ˜ìµ ëª¨ë¸:</strong> {{ idea.revenue_model }}</p>
          </details>

          <details v-if="idea.market_validation">
            <summary>ì‹œì¥ ê²€ì¦</summary>
            <p><strong>ê²½ìŸì‚¬:</strong> {{ idea.market_validation.competitors?.length || 0 }}ê°œ</p>
            <p><strong>ê²€ìƒ‰ ì¶”ì„¸:</strong> {{ idea.market_validation.market_proxies?.search_trend }}</p>
          </details>

          <details v-if="idea.matched_apis">
            <summary>ê¸°ìˆ  êµ¬í˜„</summary>
            <p><strong>ë§¤ì¹­ API:</strong> {{ idea.matched_apis.length }}ê°œ</p>
            <p><strong>ì í•©ë„:</strong> {{ idea.feasibility_pct }}%</p>
          </details>
        </div>

        <div class="idea-actions">
          <button @click="sendFeedback(idea, 'like')" class="btn-like">ğŸ‘</button>
          <button @click="sendFeedback(idea, 'dislike')" class="btn-dislike">ğŸ‘</button>
          <button @click="sendFeedback(idea, 'blacklist')" class="btn-exclude">ğŸš«</button>
        </div>
      </article>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>
